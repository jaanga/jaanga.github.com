<!doctype html>
<html lang=en >
<head>
<title>location hash parse variable lengths r1</title>
<meta charset=utf-8 />
<meta name=viewport content='width=device-width,user-scalable=no,minimum-scale=1.0,maximum-scale=1.0' />
</head>
<body>
<script>

	var aMin = '0 default';
	var aMax = '10 default';
	var bMin = '5 default';
	var bMax = '5 default';
	var material = 'normal dafault';
	var equation = 'x + y + z defult';
	var stuff = 'ck77ru default';

	init();

	function init() {

		var css = document.body.appendChild( document.createElement('style') );
		css.innerHTML = 'body { font: 600 12pt monospace; margin: 0; overflow: hidden; }' +
			'h1, a { margin: 0; }' +
			'#i { text-decoration: none; }' +
		'';

		var menu = document.body.appendChild( document.createElement( 'div' ) );
		menu.style.cssText = 'margin: 0 20px; position: absolute;';
		menu.innerHTML = '<h2>' +
				'<a href="" >' + document.title + '</a> ' +
				'<a id=i href=http://jaanga.github.io/ >&#x24D8;</a>' +
			'</h2>' +

			'<p><button onclick=hashCreate(); >random hash create</button></p>' +
			'<p><button onclick=hashCreate2(); >random hash create 2</button></p>' +
			'<div id=msg ></div>' +
		'';

		window.addEventListener("hashchange", hashChange, false);

		window.addEventListener("hashchange", hashChange2, false);

		window.addEventListener("hashchange", hashChange3, false);

	}

	function hashCreate() {

		txt = '';

		str = 'abcdefghijklmnopqrstuvwxyz';

		for ( var i = 0; i < 5; i++ ) {

			txt += '#' + str.substr( 26 * Math.random(), 1 + 15 * Math.random() )  + '=' + Math.random().toFixed( 1 + 5 * Math.random() );

		}

		msg.innerHTML = txt;

		location.hash = txt

	}

	function hashCreate2() {

		txt = '';

		arr = [ 'aMin', 'aMax', 'bMin', 'bMax', 'material', 'equation', 'stuff' ];

		for ( var i = 0; i < 5; i++ ) {

			txt += '#' + arr[ Math.floor( arr.length * Math.random() ) ]  + '=' + Math.random().toFixed( 1 + 5 * Math.random() );

		}

		msg.innerHTML = txt;

		location.hash = txt

	}

	function hashChange() {

		hashes = location.hash.split ( '#' );

		parameters = [];
		txt = '<br><br>hashChange<br>';

		for ( var i = 1; i < hashes.length; i++) {

			parameters.push( hashes[i].split( '=' ) );

			txt += i + ' ' + parameters[ i - 1 ][ 0 ] + ' = ' + parameters[ i - 1 ][ 1 ] + '<br>';

		}

		msg.innerHTML += txt

	}

	function hashChange2() {

		hashes = location.hash.split ( '#' );

		parameters = [];

		txt = '<br>hashChange2<br>';

		for ( var i = 0; i < hashes.length; i++) {

			parameters.push( hashes[i].split( '=' ) );

			if ( parameters[ i ][ 0 ] === 'aMin' ) {
				aMin = parameters[ i ][ 1 ];
			} else if ( parameters[ i ][ 0 ] === 'aMax' ) {
				aMax = parameters[ i ][ 1 ];
			} else if ( parameters[ i ][ 0 ] === 'bMin' ) {
				bMin = parameters[ i ][ 1 ];
			} else if ( parameters[ i ][ 0 ] === 'bMax' ) {
				bMax = parameters[ i ][ 1 ];
			} else if ( parameters[ i ][ 0 ] === 'material' ) {
				material = parameters[ i ][ 1 ];
			} else if ( parameters[ i ][ 0 ] === 'equation' ) {
				equation = parameters[ i ][ 1 ];
			} else if ( parameters[ i ][ 0 ] === 'stuff' ) {
				stuff = parameters[ i ][ 1 ];
			}

		}

		txt += 'aMin: ' + aMin + '<br>' +
			'aMax: ' + aMax + '<br>' +
			'bMin: ' + bMin + '<br>' +
			'bMax: ' + bMax + '<br>' +
			'material: ' + material + '<br>' +
			'equation: ' + equation + '<br>' +
			'stuff: ' + stuff + '<br>' +
		'';

		msg.innerHTML += txt

	}

	function hashChange3() {

		var hashes = location.hash.split ( '#' );

		for ( var i = 0; i < hashes.length; i++) {

			var param = hashes[i].split( '=' );

			if ( param[ 0 ] === 'aMin' ) {
				aMin = param[ 1 ];
			} else if ( param[ 0 ] === 'aMax' ) {
				aMax = param[ 1 ];
			} else if ( param[ 0 ] === 'bMin' ) {
				bMin = param[ 1 ];
			} else if ( param[ 0 ] === 'bMax' ) {
				bMax = param[ 1 ];
			} else if ( param[ 0 ] === 'material' ) {
				material = param[ 1 ];
			} else if ( param[ 0 ] === 'equation' ) {
				equation = param[ 1 ];
			} else if ( param[ 0 ] === 'stuff' ) {
				stuff = param[ 1 ];
			}

		}

		msg.innerHTML += '<br>hashChange3<br>' +
			'aMin: ' + aMin + '<br>' +
			'aMax: ' + aMax + '<br>' +
			'bMin: ' + bMin + '<br>' +
			'bMax: ' + bMax + '<br>' +
			'material: ' + material + '<br>' +
			'equation: ' + equation + '<br>' +
			'stuff: ' + stuff + '<br>' +
		'';

	}

</script>
</body>
</html>
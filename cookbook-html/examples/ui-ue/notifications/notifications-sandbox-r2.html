<!doctype html>
<html lang=en >
<head>
<title>notifications-sandbox-r2.html</title>
<meta charset=utf-8 />
</head>
<body>
<script>

	document.body.style.cssText = ' font: bold 12pt monospace; ';

	var info = document.body.appendChild( document.createElement( 'div' ) );
	info.innerHTML = '<a href="" ><h1>' + document.title + '</h1></a>' +

		'<button onclick="notifyMe();" >Notify me!</button>' +
		'<div id=msg1 ></div>' +

	'';

// request permission on page load
document.addEventListener('DOMContentLoaded', function () {

  if ( Notification.permission !== "granted") {

    Notification.requestPermission();

	}

});

function notifyMe() {

  if (!Notification) {

    alert('Desktop notifications not available in your browser. Try Chromium.'); 
    return;

  }

  if ( Notification.permission !== "granted") {

    Notification.requestPermission();
 
 } else {
 
   var notification = new Notification( 'Notification title', {
      icon: 'http://cdn.sstatic.net/stackexchange/img/logos/so/so-icon.png',
      body: "Hey there! You've been notified!",

    });

    notification.onclick = function () {

      window.open("http://stackoverflow.com/a/13328397/1269037");      

    };
    
  }

}


</script>
</body>
</html>
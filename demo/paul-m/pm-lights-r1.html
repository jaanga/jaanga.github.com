<!doctype html>
<html lang=en >
<head>
<meta charset=utf-8 >
<title>Vista Lights</title>
<meta name=viewport content='width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no,minimal-ui' >
</head>
<body>
<script>

	var color;
	var css, menu;

	init();

	function init() {

		css = document.body.appendChild( document.createElement( 'style' ) );
		css.innerHTML =
		`
		
			body { font: 12pt monospace; }
			button { background-color: #eee; border: 2px #eee solid; color: #888; }
			.box { border: solid 1px green; color: white; height: 20px; position: absolute; width: 20px; }
			#aa { text-decoration: none; }
			#info { position: relative; }

		`;

		menu = document.body.appendChild( document.createElement( 'div' ) );
		menu.id = 'menu';
		menu.innerHTML =
		`
		
			<h2>
				<a href="" >${ document.title }</a>
				<a id=aa href=http://jaanga.github.io/demo/pm >ðŸ›ˆ</a>
			</h2>
			<div id=info ></div>
			<p>
				<button onclick=send() >Send</button> 
				<input type=color id=inpColor oninput=updateColor(); >
			<p>

		`;

		info.style.height = 10 + 28 * 25 + 'px';
		color = '#000000';

		boxes = [];

		for ( var i = 0; i < 10; i++ ) {

			for ( var j = 0; j < 28; j++ ) {

				box = info.appendChild( document.createElement( 'div' ) );
				box.className = 'box';
				box.style.backgroundColor = 'white';
				box.style.left = i * 25 + 'px';
				box.style.top = j * 25 + 'px';
				box.onmouseover = function() { event.preventDefault(); this.style.backgroundColor = this.style.backgroundColor === 'white' ? color : 'white'; }
				boxes.push( box )

			}

		}

	}

	function send() {

		for ( i = 0, txt = ''; i < boxes.length; i++ ) {

			txt += boxes[ i ].style.backgroundColor.replace( /rgb|\(|\)| /gi, '' ) + '#';

		}

		location.hash = txt;

	}

	function updateColor() {

		color = inpColor.value;

	}

</script>
</body>
</html>
